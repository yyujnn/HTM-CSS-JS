<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>movie API</title>
    <style>
        table, th, td{
            border: 1px solid black;
        }
    </style>
    <script src="./js/jquery-3.6.4.min.js"></script>
</head>
<body>
    <!-- ÏòÅÌôîÏßÑÌù•ÏúÑÏõêÌöåAPIÎ•º Í∞ÄÏ†∏ÏôÄÏÑú
    ÏùºÏùº Î∞ïÏä§Ïò§ÌîºÏä§ ÏòÅÌôî TOP10Ïùò
    ÏàúÏúÑ, ÏòÅÌôîÏù¥Î¶Ñ, Í∞úÎ¥âÏùº Ï∂úÎ†• -->
    <button onclick="getAPI()">ÏàúÏúÑ Î≥¥Í∏∞ üé¨</button>
    <br><br>
    <div id="container"></div>

    <script>
        // ajax -> ÎπÑÎèôÍ∏∞ ÌÜµÏã† Î∞©Î≤ï

        // jÏøºÎ¶¨Ïóê Ï†ëÍ∑º -> $.
        // ajaxÎ©îÏÜåÎìú ÏÇ¨Ïö© -> ajax()
        // Îç∞Ïù¥ÌÑ∞Îäî JSON ÌòïÌÉúÎ°ú -> {key:value, ~}

        let movieURL = 'http://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json?key=f5eef3421c602c6cb7ea224104795888&targetDt=20230411';
        const getAPI = ()=>{
            $.ajax({
                // Ïñ¥ÎîîÎûë ÌÜµÏã†Ìï† Í±¥ÏßÄ
                url : movieURL,
                // Ïñ¥Îñ§ Î∞©ÏãùÏúºÎ°ú ÌÜµÏã†Ìï† Í±¥ÏßÄ
                type : 'get',
                // ÌÜµÏã† ÏÑ±Í≥µ Ïãú
                success : (response)=>{
                    // console.log(response.boxOfficeResult.dailyBoxOfficeList[0].movieNm);
                    let movieList = response.boxOfficeResult.dailyBoxOfficeList;
                    // console.log(movieList[0].rank);
                    // console.log(movieList[0].movieNm);
                    // console.log(movieList[0].openDt);
                    for(let i=0; i<movieList.length; i++){
                        console.log(movieList[i].rank, movieList[i].movieNm, movieList[i].openDt);
                    }
                    let tableForm = `
                        <table>
                            <tr>
                                <th>ÏàúÏúÑ</th>
                                <th>ÏòÅÌôîÏ†úÎ™©</th>
                                <th>Í∞úÎ¥âÏùº</th>
                            </tr>
                    `;
                    for(let i of movieList){
                        tableForm += `
                        <tr>
                            <td>${i.rank}</td>
                            <td>${i.movieNm}</td>
                            <td>${i.openDt}</td>
                        </tr>
                        `
                    }
                    tableForm += `</table>`;
                    $('#container').html(tableForm);
                },
                // ÌÜµÏã† Ïã§Ìå® Ïãú
                error : ()=>{
                    console.log('error');
                }
            })
        }

    </script>
</body>
</html>